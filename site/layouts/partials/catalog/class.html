{{- define "class-tree" }}
	{{- range . }}
		{{- $class := index site.Data.Index.Class . }}
		{{- if not $class.Removed }}
		<li>{{partial `entity/link.html` (dict "type" "class" "primary" . "statuskind" "set deco")}}
			{{- if $class.Subclasses }}
				<ul>
					{{- template "class-tree" $class.Subclasses }}
				</ul>
			{{- end }}
		</li>
		{{- end }}
	{{- end }}
{{- end }}

{{- define "removed-class-tree" }}
	{{- range . }}
		{{- $class := index site.Data.Index.Class . }}
		{{- if or $class.Removed $class.HasRemoved }}
		<li>{{- if $class.Removed }}
				{{partial `entity/link.html` (dict "type" "class" "primary" . "statuskind" "set deco")}}
			{{- else }}
				{{partial `entity/link.html` (dict "type" "class" "primary" . "statuskind" "set deco" "nolink" true)}}
			{{- end }}
			{{- if $class.Subclasses }}
				<ul>
					{{- template "removed-class-tree" $class.Subclasses }}
				</ul>
			{{- end }}
		</li>
		{{- end }}
	{{- end }}
{{- end -}}

<article id="classes" class="catalog">
	{{- $countPresentClasses := 0 }}
	{{- $countRemovedClasses := 0 }}
	{{- range site.Data.Index.Class }}
		{{- if .Removed }}
			{{- $countRemovedClasses = $countRemovedClasses | add 1 }}
		{{- else }}
			{{- $countPresentClasses = $countPresentClasses | add 1 }}
		{{- end }}
	{{- end }}
	<section id="present-classes" class="class-container">
		<header>
			<h2>Classes {{partial "component/element-count.html" $countPresentClasses}}
				<aside class="class-sort js">
					<label for="class-sort-present-Tree">{{- /**/ -}}
						<input id="class-sort-present-Tree" type="radio" name="class-sort-present" value="Tree" checked>{{- /**/ -}}
						Tree{{- /**/ -}}
					</label>{{- /**/ -}}
					<label for="class-sort-present-Name">{{- /**/ -}}
						<input id="class-sort-present-Name" type="radio" name="class-sort-present" value="Name">{{- /**/ -}}
						Name{{- /**/ -}}
					</label>
				</aside>
			</h2>
		</header>
		<ul class="class-tree entity-list">
			{{- template "class-tree" site.Data.Index.RootClasses -}}
		</ul>
	</section>
	<section id="removed-classes" class="class-container set removed">
		<header>
			<h2>Removed classes {{partial "component/element-count.html" $countRemovedClasses}}
				<aside class="class-sort js">
					<label for="class-sort-removed-Tree">{{- /**/ -}}
						<input id="class-sort-removed-Tree" type="radio" name="class-sort-removed" value="Tree" checked>{{- /**/ -}}
						Tree
					</label>{{- /**/ -}}
					<label for="class-sort-removed-Name">{{- /**/ -}}
						<input id="class-sort-removed-Name" type="radio" name="class-sort-removed" value="Name">{{- /**/ -}}
						Name{{- /**/ -}}
					</label>
				</aside>
			</h2>
		</header>
		<ul class="class-tree entity-list">
			{{- range site.Data.Index.RootClasses }}
				{{- $class := index site.Data.Index.Class . }}
				{{- if $class.Removed }}
					{{- template "removed-class-tree" (slice .) }}
				{{- end }}
			{{- end -}}
		</ul>
	</section>
</article>
